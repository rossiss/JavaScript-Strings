<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>4.ChangeText</title>
	<link href="styles/js-console.css" rel="stylesheet" />
</head>
<body>
    <h1>Change text in all regions</h1>
	<div id="js-console"></div>
	<script src="scripts/js-console.js"></script>
	<script>
	    //You are given a text. Write a function that changes the text in all regions:
	    //<upcase>text</upcase> to uppercase.
        //<lowcase>text</lowcase> to lowercase
        //<mixcase>text</mixcase> to mix casing(random)


        //finds the substring between the given tags and changes that substring
	    function upCase(text) {
	        var indexStart = text.indexOf("<upcase>");
	        while (indexStart > -1) {
	            var region = text.substring(indexStart + 8, text.indexOf("</upcase>", indexStart));
	            var upperText = region.toUpperCase();
	            text = text.replace(region, upperText);
	            indexStart = text.indexOf("<upcase>", indexStart + 1);
	        }
	        return text;
	    }

	    function mixCase(text) {
	        var indexStart = text.indexOf("<mixcase>");
	        while (indexStart > -1) {
	            var region = text.substring(indexStart + 9, text.indexOf("</mixcase>", indexStart));
	            var mixedText = new String(region);
	            for (var i = 0; i < mixedText.length ; i++) {
	                if (i % 2 == 0) {
	                    mixedText = mixedText.replace(mixedText[i], mixedText[i].toUpperCase());
	                }
	                else {
	                    mixedText = mixedText.replace(mixedText[i], mixedText[i].toLowerCase());
	                }
	            }
	            text = text.replace(region, mixedText);
	            indexStart = text.indexOf("<mixcase>", indexStart + 1);
	        }
	        return text;
	    }

	    function lowCase(text) {
	        var indexStart = text.indexOf("<lowcase>");
	        while (indexStart > -1) {
	            var region = text.substring(indexStart + 9, text.indexOf("</lowcase>", indexStart));
	            var lowerText = region.toLowerCase();
	            text = text.replace(region, lowerText);
	            indexStart = text.indexOf("<lowcase>", indexStart + 1);
	        }
	        return text;
	    }

	    var text = "We are <mixcase>living</mixcase> in a <upcase>yellow submarine</upcase>. We <mixcase>don't</mixcase> have <lowcase>anything</lowcase> else.";
	    text = upCase(text);
	    text = lowCase(text);
	    text = mixCase(text);
	    jsConsole.writeLine(text);
	</script>
</body>
</html>
